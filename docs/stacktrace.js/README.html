<h1 id="stacktrace-js">stacktrace.js</h1>
<p><a href="https://travis-ci.org/stacktracejs/stacktrace.js"><img src="https://travis-ci.org/stacktracejs/stacktrace.js.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/stacktracejs/stacktrace.js?branch=master"><img src="https://img.shields.io/coveralls/stacktracejs/stacktrace.js.svg" alt="Coverage Status"></a> <a href="https://codeclimate.com/github/stacktracejs/stacktrace.js"><img src="https://codeclimate.com/github/stacktracejs/stacktrace.js/badges/gpa.svg" alt="Code Climate"></a></p>
<p>A JavaScript tool that allows you to debug your JavaScript by giving you a <a href="http://en.wikipedia.org/wiki/Stack_trace">stack trace</a> of function calls leading to an error (or any condition you specify).</p>
<p>The promises referenced below are <a href="https://github.com/jakearchibald/es6-promise">ES6-Promises</a>.</p>
<h2 id="usage">Usage</h2>
<pre><code class="lang-js">var callback = function(stackframes) {
    var stringifiedStack = stackframes.map(function(sf) { 
        return sf.toString(); 
    }).join(&#39;\n&#39;); 
    console.log(stringifiedStack); 
};

var errback = function(err) { console.log(err.message); };

StackTrace.get().then(callback, errback)
=&gt; Promise(Array[StackFrame](https://github.com/stacktracejs/stackframe), Error)
=&gt; callback([StackFrame(&#39;func1&#39;, [], &#39;file.js&#39;, 203, 9), StackFrame(&#39;func2&#39;, [], &#39;http://localhost:3000/file.min.js&#39;, 1, 3284)])

// Somewhere else...
var error = new Error(&#39;BOOM!&#39;); 

StackTrace.fromError(error).then(callback, errback)
=&gt; Promise(Array[StackFrame](https://github.com/stacktracejs/stackframe), Error)

StackTrace.generateArtificially().then(callback, errback)
=&gt; Promise(Array[StackFrame](https://github.com/stacktracejs/stackframe), Error)

StackTrace.instrument(interestingFn, callback, errback)
=&gt; Instrumented Function

StackTrace.deinstrument(interestingFn)
=&gt; De-instrumented Function
</code></pre>
<h2 id="get-stacktrace-js">Get stacktrace.js</h2>
<pre><code>npm install stacktrace-js
bower install stacktrace-js
https://rawgithub.com/stacktracejs/stacktrace.js/master/dist/stacktrace.min.js
</code></pre><h3 id="stacktrace-js-is-available-on-cdnjs-com">stacktrace.js is available on cdnjs.com</h3>
<p><a href="https://cdnjs.com/libraries/stacktrace.js">https://cdnjs.com/libraries/stacktrace.js</a></p>
<p><code>//cdnjs.cloudflare.com/ajax/libs/stacktrace.js/0.6.4/stacktrace.min.js</code></p>
<h2 id="api">API</h2>
<h4 id="-stacktrace-get-optional-options-promise-array-stackframe-"><code>StackTrace.get(/*optional*/ options)</code> =&gt; Promise(Array[StackFrame])</h4>
<p>Generate a backtrace from invocation point, then parse and enhance it.
options: Object</p>
<ul>
<li><strong>sourceCache: Object (String URL =&gt; String Source)</strong> - Pre-populate source cache to avoid network requests</li>
<li><strong>offline: Boolean (default: false)</strong> - Set to <code>true</code> to prevent all network requests</li>
</ul>
<h4 id="-stacktrace-fromerror-error-optional-options-promise-array-stackframe-"><code>StackTrace.fromError(error, /*optional*/ options)</code> =&gt; Promise(Array[StackFrame])</h4>
<p>Given an Error object, use <a href="https://github.com/stacktracejs/error-stack-parser">error-stack-parser</a>
 to parse it and enhance location information with <a href="https://github.com/stacktracejs/stacktrace-gps">stacktrace-gps</a>.</p>
<ul>
<li><strong>sourceCache: Object (String URL =&gt; String Source)</strong> - Pre-populate source cache to avoid network requests</li>
<li><strong>offline: Boolean (default: false)</strong> - Set to <code>true</code> to prevent all network requests</li>
</ul>
<h4 id="-stacktrace-generateartificially-optional-options-promise-array-stackframe-"><code>StackTrace.generateArtificially(/*optional*/ options)</code> =&gt; Promise(Array[StackFrame])</h4>
<p>Use <a href="https://github.com/stacktracejs/stack-generator">stack-generator</a> to generate a backtrace by walking the <code>arguments.callee.caller</code> chain.</p>
<ul>
<li><strong>sourceCache: Object (String URL =&gt; String Source)</strong> - Pre-populate source cache to avoid network requests</li>
<li><strong>offline: Boolean (default: false)</strong> - Set to <code>true</code> to prevent all network requests</li>
</ul>
<h4 id="-stacktrace-instrument-fn-callback-optional-errback-boolean"><code>StackTrace.instrument(fn, callback, /*optional*/ errback)</code> =&gt; Boolean</h4>
<p>Call callback with a <em>stack trace</em> anytime <code>fn</code> is called. Returns <code>true</code> if given Function is successfully instrumented</p>
<ul>
<li><strong>fn</strong> - Function to wrap, call callback on invocation and call-through</li>
<li><strong>callback</strong> - Function to call with stack trace (generated by <code>StackTrace.get()</code>) when fn is called</li>
<li><strong>errback</strong> - (Optional) Function to call with Error object if there was a problem getting a stack trace. 
Fails silently (though <code>fn</code> is still called) if a stack trace couldn&#39;t be generated.</li>
</ul>
<h4 id="-stacktrace-deinstrument-fn-boolean"><code>StackTrace.deinstrument(fn)</code> =&gt; Boolean</h4>
<p>Remove StackTrace instrumentation on <code>fn</code>. Returns <code>true</code> if deinstrumentation succeeds.</p>
<ul>
<li><strong>fn</strong> - Previously wrapped Function</li>
</ul>
<h2 id="browser-support">Browser Support</h2>
<ul>
<li>Chrome 1+</li>
<li>Firefox 3+</li>
<li>Safari 5+</li>
<li>Opera 9+</li>
<li>IE 6+</li>
<li>iOS 7+</li>
<li>Android 4.0+</li>
</ul>
<p><em>NOTE: You won&#39;t get the benefit of <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/">source maps</a>
in IE9- or other very old browsers.</em></p>
<h2 id="using-node-js-io-js-only-">Using node.js/io.js only?</h2>
<p>I recommend the <a href="https://www.npmjs.com/package/stack-trace">stack-trace node package</a>. 
It has a very similar API and also supports source maps.</p>
<h2 id="contributing">Contributing</h2>
<p>Want to be listed as a <em>Contributor</em>? Start with the <a href="CONTRIBUTING.md">Contributing Guide</a>!</p>
<p>This project is made possible due to the efforts of these fine people:</p>
<ul>
<li><a href="http://www.eriwen.com">Eric Wendelin</a></li>
<li><a href="https://github.com/victor-homyakov">Victor Homyakov</a></li>
<li><a href="https://github.com/stacktracejs/stacktrace.js/graphs/contributors">Many others</a></li>
</ul>
<h2 id="license">License</h2>
<p>This project is licensed to the <a href="http://unlicense.org">Public Domain</a></p>
